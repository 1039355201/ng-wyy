<div class="m-player"
[@showHide]="showPlayer"
(click)="selfClick = true"
(mouseenter)="togglePlayer('show')"
(mouseleave)="togglePlayer('hide')"
(@showHide.start)="animating = true"
(@showHide.done)="onAnimateDone($event)">
  <div class="lock">
    <div class="left" (click)="lockPlayer = !lockPlayer">
      <i [class.locked]="lockPlayer"></i>
    </div>
  </div>
  <div class="hand"></div>

  <div class="container">
    <div class="wrap">
      <div class="btns">
        <i class="prev" (click)="onPrev(currentIndex - 1)"></i>
        <i class="toggle" [class.playing]="playing" (click)="onToggle()"></i>
        <i class="next" (click)="onNext(currentIndex + 1)"></i>
      </div>
      <div class="head">
        <img appImgDefault [hidden]="currentSong" src="//s4.music.126.net/style/web2/img/default/default_album.jpg" />
        <img appImgDefault [hidden]="!currentSong" src="{{currentSong?.al.picUrl}}" alt="{{currentSong?.name}}" />
        <i class="mask"></i>
      </div>
      <div class="play">
        <div class="words clearfix" [class.hide]="!currentSong">
          <p class="ellipsis">{{currentSong?.name}}</p>
          <ul class="songs clearfix">
            <li *ngFor="let item of currentSong?.ar; last as isLast">
              <a>{{item.name}}</a>
              <span [hidden]="isLast">/</span>
            </li>
          </ul>
          <!-- <ng-container>
            <span *ngFor="let item of currentSong?.ar">{{item.name}}</span>
          </ng-container> -->
          <!-- <i></i> -->
        </div>
        <div class="bar">
          <div class="slider-wrap">
            <app-wy-slider [bufferOffset]="bufferPercent" [(ngModel)]="percent" (wyOnAfterChange)="onPercentChange($event)"></app-wy-slider>
          </div>
          <span class="time">
          <em>{{currentTime | FormatTime}}</em> / {{duration | FormatTime}}
        </span>
        </div>
      </div>

      <div class="oper">
        <i class="like" title="收藏"></i>
        <i class="share" title="分享"></i>
      </div>
      <div class="ctrl">
        <i class="volume" title="音量" (click)="toggleVolPanel($event)"></i>
        <i [ngClass]="currentMode.type" [title]="currentMode.label" (click)="changeMode()"></i>
        <p class="open" nz-tooltip [nzTitle]="controlToolTip.title" nzOverlayClassName="tip-bg" [nzVisible]="controlToolTip.show" (click)="toggleListPanel($event)">
          <span></span>
        </p>

        <!--音量-->
        <div class="control-vol" [hidden]="!showVolPanel">
          <app-wy-slider [wyVertical]="true" [(ngModel)]="currentVol" (ngModelChange)="onVolChange($event)"></app-wy-slider>
        </div>
      </div>

      <!--面板-->
      <app-wy-player-panel
        [show]="showPanel"
        [playing]="playing"
        [songList]="songList"
        [currentSong]="currentSong"
        (onClose)="showPanel = false"
        (onChangeSong)="onChangeSong($event)"
        (onDeleteSong)="onDeleteSong($event)"
        (onClearSong)="onClearSong()">
      </app-wy-player-panel>
    </div>
  </div>

  <audio
    #audio
    src="{{currentSong?.url}}"
    (canplay)="onCanPlay()"
    (error)="onError()"
    (timeupdate)="onTimeUpdate($event)"
    (ended)="onEnded()">
  </audio>
</div>